<app-header></app-header>
<div class="container">
    <div class="row">
      <div class="col">
        <div class="alert alert-info my-4" role="alert">
          ¡Reserva la hora exacta para recibir tu concreto! Flexibilidad y puntualidad, justo cuando lo necesites.
        </div>
        <h2>Hora de Reserva</h2>
        <div class="hours">
          <div
            *ngFor="let hour of getAvailableHours()"
            class="hour"
            [ngClass]="getHourStatus(hour)"
            [attr.disabled]="getHourStatus(hour)=== 'unavailable' ? true : null"
               (click)="getHourStatus(hour)=== 'available' ? selectHour(hour) : null">
            
            {{ hour }}
          </div>
        </div>
      </div>
    </div>
  
    <div class="modal" tabindex="-1" [ngClass]="{'d-block': isModalVisible, 'd-none': !isModalVisible}">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title">Reserva de Hora</h5>
            <button type="button" class="btn-close" (click)="isModalVisible = false"></button>
          </div>
          <div class="modal-body">
            <form [formGroup]="reservationForm" (ngSubmit)="submitReservation()" *ngIf="!showReservationDetails">
              <div class="mb-3">
                <label for="name" class="form-label">Nombre</label>
                <input id="name" formControlName="name" class="form-control" />
                <div *ngIf="reservationForm.get('name')?.invalid && reservationForm.get('name')?.touched" class="text-danger">
                  El nombre es requerido.
                </div>
              </div>
  
              <div class="mb-3">
                <label for="email" class="form-label">Correo electrónico</label>
                <input id="email" formControlName="email" class="form-control" />
                <div *ngIf="reservationForm.get('email')?.invalid && reservationForm.get('email')?.touched" class="text-danger">
                  El correo electrónico es requerido y debe ser válido.
                </div>
              </div>
  
              <div class="mb-3">
                <label for="phone" class="form-label">Teléfono</label>
                <input id="phone" formControlName="phone" class="form-control" />
                <div *ngIf="reservationForm.get('phone')?.invalid && reservationForm.get('phone')?.touched" class="text-danger">
                  El teléfono es requerido y debe tener 10 dígitos.
                </div>
              </div>
  
              <button type="submit" class="btn btn-primary" [disabled]="reservationForm.invalid">Reservar</button>
            </form>
            <div *ngIf="showReservationDetails" class="reservation-details">
              <div class="alert alert-success" role="alert">
                Ah reservado exitosamente! 
              </div>
              <h3>Detalles de la Reserva</h3>
              <p><strong>Nombre:</strong> {{ reservationData.name }}</p>
              <p><strong>Correo electrónico:</strong> {{ reservationData.email }}</p>
              <p><strong>Teléfono:</strong> {{ reservationData.phone }}</p>
              <p><strong>Hora reservada:</strong> {{ reservationData.hour }}</p>
              <button class="btn btn-success" (click)="confirmReservation()">Aceptar</button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  